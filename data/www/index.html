<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encoder3D Controller</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    <div id="app">
        <div id="sidebar">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h1>Encoder3D</h1>
                <a href="/wifi.html" style="color: #007acc; text-decoration: none; font-size: 0.9em;">⚙️ Setup</a>
            </div>
            <div class="panel">
                <h2>Status <span id="ws-status" style="font-size: 0.6em; color: #f48771;">(Disconnected)</span></h2>
                <div id="status-display">
                    <p>X: <span id="pos-x">0.00</span></p>
                    <p>Y: <span id="pos-y">0.00</span></p>
                    <p>Z: <span id="pos-z">0.00</span></p>
                    <p>E: <span id="pos-e">0.00</span></p>
                </div>
            </div>
            <div class="panel">
                <h2>Thermal</h2>
                <p>Extruder: <span id="temp-ext">0</span>°C / <input type="number" id="target-ext" value="0" style="width: 50px"></p>
                <p>Bed: <span id="temp-bed">0</span>°C / <input type="number" id="target-bed" value="0" style="width: 50px"></p>
                <button onclick="setTemps()">Set Temps</button>
            </div>
            <div class="panel">
                <h2>Manual Control</h2>
                <button onclick="sendGCode('G28')">Home All</button>
                <div class="jog-controls">
                    <button onclick="sendGCode('G1 X-10')">X-</button>
                    <button onclick="sendGCode('G1 X10')">X+</button>
                    <button onclick="sendGCode('G1 Y-10')">Y-</button>
                    <button onclick="sendGCode('G1 Y10')">Y+</button>
                    <button onclick="sendGCode('G1 Z-10')">Z-</button>
                    <button onclick="sendGCode('G1 Z10')">Z+</button>
                </div>
            </div>
            <div class="panel">
                <h2>Job</h2>
                <input type="file" id="gcode-upload">
                <button onclick="uploadGCode()">Upload & Print</button>
            </div>
        </div>
        <div id="viewer-container">
            <!-- Three.js Canvas will be injected here -->
        </div>
    </div>
    <script src="js/app.js"></script>
</body>
</html>
